<h2 class="mb-2 text-center">–û–ø–∏—Ç—É–≤–∞–Ω–Ω—è</h2>
<div class="d-flex mb-3">
  <div class="me-3">
    <label class="mb-1">
      –®—É–∫–∞—Ç–∏ –∑–∞ –Ω–∞–∑–≤–æ—é:
    </label>
    <input type="text" class="form-control"  name="" id="" [(ngModel)]="searchField" placeholder="–ü–æ—à—É–∫">
  </div>
  <div>
    <label class="mb-1">
      –°–æ—Ä—Ç—É–≤–∞—Ç–∏ –∑–∞:
    </label>
    <select class="form-select" aria-label="Default select example"  [(ngModel)]="sortByParam">
      <option value="" selected>–î–æ—Å—Ç—É–ø–Ω—ñ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</option>
      <option value="expiredAt">–î–∞—Ç–∞ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è</option>
      <option value="pollName">–ù–∞–∑–≤–∞</option>
      <option value="enteredByTimes" >–ö—ñ–ª—å–∫—ñ—Å—Ç—é –ø—Ä–æ–π–¥–µ–Ω–∏—Ö</option>
      <option value="alreadyAnswered">–ü—Ä–æ–π–¥–µ–Ω—ñ –º–Ω–æ—é</option>
      <option value="onlyPublic">–õ–∏—à–µ –≤—ñ–¥–∫—Ä–∏—Ç—ñ</option>
      <option value="onlyPrivate">–õ–∏—à–µ –∑–∞–∫—Ä–∏—Ç—ñ</option>
    </select>
  </div>
</div>

<div class="m-auto">
  
  
  <ng-container *ngFor="let poll of pollsList | filter: searchField | sort:[sortByParam]">

    <div class="card" 
         *ngIf="currentUser.role =='ADMIN'">
      <div class="card-body">
        
        
        <div class="date-info">
          <p>
            –û–ø–∏—Ç—É–≤–∞–Ω–Ω—è –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è {{poll.expiredAt | date:'dd.MM.YYYY'}} 
          </p>
          <p>üëÅ {{ poll.enteredByTimes }}</p>
        </div>  
        <h4 class="card-title">–ù–∞–∑–≤–∞: {{ poll.pollName }}</h4>
        <p class="card-text">–û–ø–∏—Å: {{ poll.pollDescription }}</p>
      </div>
    </div>
    <div *ngIf="currentUser.role =='USER'">
      <div class="card" 
         
         *ngIf="
         (poll.public || poll.availableTo.includes(currentUser.email)) && poll.expiredAt > this.date  && !poll.enteredBy.includes(currentUser.email) &&
         (sortByParam == '' || sortByParam == 'expiredAt' ||sortByParam == 'pollName' || sortByParam == 'enteredByTimes')
         ">
      <div class="card-body">
        <h5 *ngIf="poll.enteredBy.includes(currentUser.email)">–í–∏ –≤–∂–µ –ø—Ä–æ–π—à–ª–∏ —Ü–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</h5>
        <div class="date-info">
          <p>
            –û–ø–∏—Ç—É–≤–∞–Ω–Ω—è –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è {{poll.expiredAt | date:'dd.MM.YYYY'}} 
          </p>
          <p>üëÅ {{ poll.enteredByTimes }}</p>
        </div>
        <h4 class="card-title">–ù–∞–∑–≤–∞: {{ poll.pollName }}</h4>
        <p class="card-text">–û–ø–∏—Å: {{ poll.pollDescription }}</p>
        
        <a *ngIf="!poll.enteredBy.includes(currentUser.email)"  class="btn btn-primary" [routerLink]="[ '/polls', poll.id ]" (click)="enteredByCheck(poll)">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</a>
      </div>
    </div>



    <div class="card" 
         *ngIf="(sortByParam == 'alreadyAnswered') && poll.enteredBy.includes(currentUser.email) ">
      <div class="card-body">
        <p>
          <h5>–í–∏ –≤–∂–µ –ø—Ä–æ–π—à–ª–∏ —Ü–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</h5>
          <h4 class="card-title">–ù–∞–∑–≤–∞: {{ poll.pollName }}</h4>
          <p class="card-text">–û–ø–∏—Å: {{ poll.pollDescription }}</p>
      </div>
    </div>

    <div class="card" 
         
         *ngIf="
         (poll.public) && poll.expiredAt > this.date  && 
         (sortByParam == 'onlyPublic')
         ">
      <div class="card-body">
        <h5 *ngIf="poll.enteredBy.includes(currentUser.email)">–í–∏ –≤–∂–µ –ø—Ä–æ–π—à–ª–∏ —Ü–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</h5>
        <div class="date-info">
          <p>
            –û–ø–∏—Ç—É–≤–∞–Ω–Ω—è –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è {{poll.expiredAt | date:'dd.MM.YYYY'}} 
          </p>
          <p>üëÅ {{ poll.enteredByTimes }}</p>
        </div>
        <h4 class="card-title">–ù–∞–∑–≤–∞: {{ poll.pollName }}</h4>
        <p class="card-text">–û–ø–∏—Å: {{ poll.pollDescription }}</p>
        <a *ngIf="!poll.enteredBy.includes(currentUser.email)" href="#" class="btn btn-primary" [routerLink]="[ '/polls', poll.id ]" (click)="enteredByCheck(poll)">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</a>
      </div>
    </div>

    <div class="card" 
         
         *ngIf="
         (poll.availableTo.includes(currentUser.email)) && poll.expiredAt > this.date  && 
         (sortByParam == 'onlyPrivate')
         ">
      <div class="card-body">
        <h5 *ngIf="poll.enteredBy.includes(currentUser.email)">–í–∏ –≤–∂–µ –ø—Ä–æ–π—à–ª–∏ —Ü–µ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</h5>
        <div class="date-info">
          <p>
            –û–ø–∏—Ç—É–≤–∞–Ω–Ω—è –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è {{poll.expiredAt | date:'dd.MM.YYYY'}} 
          </p>
          <p>üëÅ {{ poll.enteredByTimes }}</p>
        </div>
        <h4 class="card-title">–ù–∞–∑–≤–∞: {{ poll.pollName }}</h4>
        <p class="card-text">–û–ø–∏—Å: {{ poll.pollDescription }}</p>
        <a *ngIf="!poll.enteredBy.includes(currentUser.email)" href="#" class="btn btn-primary" [routerLink]="[ '/polls', poll.id ]" (click)="enteredByCheck(poll)">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ–ø–∏—Ç—É–≤–∞–Ω–Ω—è</a>
      </div>
    </div>
    </div>
    
  </ng-container>

</div>
